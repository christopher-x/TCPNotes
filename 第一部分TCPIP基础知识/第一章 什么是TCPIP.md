# 第一章 什么是TCP/IP  

## 基本概念  

TCP/IP是一类协议系统，它是一套支持网络通信的协议集合。  

## 1.1网络和协议  

计算机相互通信的五大步骤  

发送-----应用程序&rarr;应用层&rarr;传输层&rarr;网络层&rarr;网络接入层&rarr;到达网络硬件  

接收-----网络硬件&rarr;网络接入层&rarr;网络层&rarr;传输层&rarr;应用层&rarr;到达应用程序  

**其中网络协议簇会发生在发送方的网络层以及接收方的传输层**  

简单理解为厂商为了方便不同机器之间的通信采取的一套标准  

TCP/IP标准定义了TCP/IP网络的通信规则；  

TCP/IP实现是一个软件组件，计算机通过它参与到TCP/IP网络中  

TCP/IP标准的目的是确保所有厂商提供的TCP/IP实现都能够很好的兼容  

**注意：**  

TCP/IP标准和TCP/IP实现之间的区别  

TCP/IP标准知识定义了其应该提供的服务  

TCP/IP实现主要是由厂商开发的软件进行完成  

## 1.2 TCP/IP的开发  

早期的ARPA由美国国防部进行研究  

**端点验证**：两台实际通信的计算都称为端点，因为它们位于信息链的末端，负责确认和验证传输，所有的计算机都是对等操作，没有监视通信的中心模式  

**动态路由选择**：节点通过多条路径链接，路由器会基于当前的条件选择一条路径来传输数据  

为了让用户能够共享文件以及访问外围设备，于是开发出了局域网（Local Area Network，LAN）。  

早期的LAN是不能与Internet相互共存的，用户如果想要使用Internet，则需要进行拨号线路进行单独连接  

然而随着万维网的成长，催生了终端用户与Internet的连接需求，使得TCP/IP更为必要，于是许多厂商将TCP/IP作为局域网，Internet的默认协议来进行开发  

## 1.3 TCP/IP特性  

**逻辑编址；路由选择；名称解析；错误控制和流量控制；应用支持**  

### 1.3.1 逻辑编址  

网络适配器在出厂时会带有一个唯一的物理地址（俗称MAC地址）  

在基本的以太网中，计算机直接在传输介质上发送消息，每台计算机的网络适配器监听局域网中的每一个传输，以确定消息是否是发送到该物理地址（MAC）  

在大型网络中这种寻址的方式不能有效的发挥作用，因为网络适配器不能监听所有的信息  

 TCP/IP通过逻辑编址提供了这样的子网化能力，逻辑地址是通过一个软件来配置的地址。  

计算机的逻辑地址称为IP地址，一个IP地址包括以下几点：  

**一个识别网络的网络ID数值**  

**一个识别网络中子网的子网ID数值**  

**一个识别子网中计算机的主机ID数值**  

**注意**如果你的网络与Internet相隔离，则可以任意使用任何ip地址（只要网络遵循基本的ip编址原则）  

如果网络与Internet相连，互联网名称与数字地址分配机构（ICANN，成立于1998年）将分配一个网络ID给你，该网络ID称为IP地址的第一部分。   

网络地址转换（NAT）系统，它可以让你在局域网中拥有私有的，不可路由的IP地址，当需要与Internet进行通信时，NAT会将这个地址转换为正式的Internet就绪地址。  

逻辑地址与具体的硬件物理地址之间的转换是使用地址解析协议（Address Rosolution Protocol，ARP）和逆向地址解析协议（Reverse ARP，RARP）实现的。  

### 1.3.2 路由选择

路由器是一种特殊设备，可以读取逻辑地址信息，并将数据通过网络直接传送到它的目的地。  

路由器将一个局域子网从较大的网络中进行分离出来。   

在局域网中两台计算机进行传输信息时不会经过路由器，当需要向子网以外发送信息时，路由器负责转发数据。   

大型网络通常包括很多路由器，并且提供从源到目的地的多条路径。   

TCP/IP包括了定义路由器如何找到网络路径的协议。  

除了路由器之外，还有网桥，交换机，智能hub这样的网络设备也都可以过滤流量并减少网络拥堵，由于这些设备使用的都是物理地址而不是逻辑地址，因此它们不能执行比较复杂的路由功能  

### 1.3.3 名称解析

对于用户而言，数字化的IP地址要比网络适配器的物理地址更方便使用，但是IP地址的设计是为了方便计算机的操作  

TCP/IP同时提供了IP地址的另外一种结构，它以字母数字命名，这种结构称为域名或域名系统（Domain Name System，DNS）域名到IP地址的映射称为名称解析。  

通常与E-mail或万维网相关联的计算机地址被表示为DNS名称（例：www.Google.com 、idir.net）TCP/IP的域名服务系统提供的分层的域名服务器，这些服务器为网络中注册DNS的计算机提供域名和IP地址之间的映射。意味着用户不需要输入或解读真实的IP地址了。

DNS用于Internet的域名解析系统，也是最常见的域名解析方法，然而，也可以使用现有的其他技术将字母数字化的域名解析为IP地址。这些可用的替代系统的重要性在近年来逐渐淡化，但是域名解析服务，例如将NetBIOS解析为IP地址的Windows Internet命名服务仍在世界范围内使用。  

### 1.3.4 错误控制和流量控制

TCP/IP协议簇提供了确保数据在网络中可靠传送的特性，包括检查数据的传输错误（确保到达的数据与发送的数据一致）和确认成功接收到网络信息  

通过TCP协议定义了许多这样的错误控制，流量控制和确认功能，位于TCP/IP的网络访问层中的低层协议在错误控制的整体系统中也起到了一定作用。  

### 1.3.5 应用支持

在计算机上同时运行的多种网络应用程序，在TCP/IP中，这个通过系统的逻辑通道实现从网络到应用程序的接口被称为端口，每个端口都有一个用于识别该端口的数字。数据通过这些管道实现在应用程序和协议软件之间的传输  

TCP/IP簇还包括一些现成的应用程序，用来辅助各种网络任务。

## 1.4 标准组织和RFC

Internet架构委员会（IAB）设置Internet的策略和负责TCP/IP标准未来发展的理事会。  

Internet工程任务组（IETF）研究和管辖工程任务的组织。IETF呗划分为研究TCP/IP和Internet具体内容（比如应用，路由选择，网络管理等）的工作组  

Internet研究任务组（IRTF）IAB的分支机构，致力于长期的研究。  

互联网名称与数字地址分配机构（ICNN）成立于1998年，协调Internet域名，IP地址和全球唯一协议参数（比如端口号）的分配。  

**TCP/IP是一个标准开放的系统，不被任何公司或个人持有**  

## 1.5 小结

本章介绍了网络，以及为什么网络需要协议，以及TCP/IP的起源（起源于美国国防部的ARPAnet网络）以及TCP/IP旨在多样化的环境中提供分散的联网方式。  

TCP/IP的几个重要特性，例如：**逻辑编址**、**名称解析**、**应用支持**，还概述了TCP/IP的几个监管组织和RFC文档

## 1.6 问与答

问：协议标准和协议实现之间的不同是什么？  

答：协议标准是一系列的规则，协议实现是应用这些规则的软件组件，使得计算机能够具有联网功能  

问：为什么端点验证是ARPAnet的一个重要特征？  

答：按照设计，网络不应该由任何中心节点来控制，因此发送和接收数据的计算机必须负责验证自己的通信。   

问：为什么较大的网络使用名称解析？  

答：IP地址不便于记忆并容易搞错，DNS样式的域名容易记忆，因为它们允许将一个单词或名字与IP地址相关联  

## 1.7 测验  

### 1.7.1 问题  

1、什么是网络协议？  

**答：网络协议就是一套通用规则，用来帮助定义复杂数据传输的过程**  

2、TCP/IP的哪两个特征使得TCP可以在分散的环境中运行？  

**答：端点验证和动态路由**  

3、什么系统负责域名和IP地址之间的映射？  

**答：DNS系统（Domain Name System）**  

4、什么是RFC？  

**答：RFC是一个描述某个Internet标准的文档，或者是帮助运行Internet的工作组报告**  

5、什么是端口？  

**答：端口实际上是系统的逻辑通道，通过端口可以使得各个网络应用可以与Internet进行相互通信**  

### 1.7.2 练习

1.访问www.rfc-editor.org并查看几个RFC  

2.通过datatracker.ietf.org/wg/ 网站来访问IETF，并查看几个活跃的工作组  

3.通过www.irtf.org来访问IRTF，并查看正在进行的研究  

4.通过www.icann.org/en/about 来查看ICANN的About页面，并了解ICANN的任务  

5.阅读RFC1160，以了解IAB和IETF在1990年之前的历史。  

## 1.8 关键术语

复习下列关键术语：  

**ARPAnet** 一种试验性网络，也是TCP/IP的诞生地  

**域名** 通过TCP/IP的DNS域名服务系统，与IP地址相关联的名字  

**网关** 连接LAN到大型网络的路由器，在专属LAN协议当道的时期，术语“网关”有时指执行一些协议转换的路由器  

**IP地址** 用于定位TCP/IP网络上计算机或其他联网设备的逻辑地址（如：打印机）  

**局域网**（LAN）供单个办公室、组织或家庭使用的小型网络，通常只占据一个地理位置  

**逻辑地址** 通过协议软件配置的网络地址  

**域名服务** 将网络地址与便于人记忆的名字相关联的一种服务，提供该服务的计算机被称为域名服务器，将名字解析为地址的行为称作名称解析。  

**网络协议** 对通信过程的一个具体方面进行定义的一组通用规则  

**物理地址** 与网络硬件相关的地址，在以太网适配器中，物理地址通常在适配器出场之前分配给它  

**端口** 一种内部通道或地址，它在应用程序和TCP/IP传输层之间提供了一个接口  

**专属** 有私有实体（比如一个公司）控制的技术  

**协议实现** 实现了协议标准中定义的通信规则的软件组件  

**RFC** 提供有关TCP/IP或Internet信息的官方技术文档，可以在网络的多个地方找到RFC，例如：www.rfc-editor.org  

**路由器** 通过逻辑地址来转发数据的一种网络设备，并且也可以用来将大型网络分为几个较小的子网。  

**TCP/IP** 在Internet和很多其他网络上使用的网络协议簇  